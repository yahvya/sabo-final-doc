<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF" data-resizable-sidebar="true"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex"><meta name="built-on" content="2024-08-12T00:33:18.0112867"><title>Gestion de la maintenance | Sabo Framework</title><script type="application/json" id="virtual-toc-data">[{"id":"etat-de-l-application-durant-une-maintenance","level":0,"title":"Etat de l\u0027application durant une maintenance","anchor":"#etat-de-l-application-durant-une-maintenance"},{"id":"acc-s-l-application","level":0,"title":"Accès à l\u0027application","anchor":"#acc-s-l-application"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.10.0-b408/app.css" rel="stylesheet"><link rel="icon" type="image/x-icon" sizes="16x16" href="images/sabo-icon.ico"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Gestion de la maintenance | Sabo Framework"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="Sabo Framework Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/maintenance-managment.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Gestion de la maintenance | Sabo Framework"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/maintenance-managment.html#webpage",
    "url": "writerside-documentation/maintenance-managment.html",
    "name": "Gestion de la maintenance | Sabo Framework",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/#website",
    "url": "writerside-documentation/",
    "name": "Sabo Framework Help"
}</script><!-- End Schema.org --></head><body data-id="maintenance_managment" data-main-title="Gestion de la maintenance" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="starter-topic.md|Framework Sabo///routing.md|Routing"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Sabo Framework  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="maintenance_managment" id="maintenance_managment.md">Gestion de la maintenance</h1><aside class="prompt" data-type="tip" data-title="" id="-qdzzqw_3"><p id="-qdzzqw_6">La mise &agrave; jour de l'&eacute;tat de maintenance se g&egrave;re <a href="configuration-elements.html#env-php" id="-qdzzqw_7" data-tooltip="[env.php] Configuration d'environnement">via la configuration d'environnement</a></p></aside><section class="chapter"><h2 id="etat-de-l-application-durant-une-maintenance" data-toc="etat-de-l-application-durant-une-maintenance">Etat de l'application durant une maintenance</h2><aside class="prompt" data-type="tip" data-title="" id="-qdzzqw_8"><p id="-qdzzqw_9">Durant une maintenance comme expliqu&eacute; <a href="routing.html#etapes-de-routing" id="-qdzzqw_10" data-tooltip="Insertion et vérification des configurations dans l'ordre">sur le sch&eacute;ma du processus routing</a>, toute ressource hormis la page d'affichage de maintenance est bloqu&eacute;.</p></aside></section><section class="chapter"><h2 id="acc-s-l-application" data-toc="acc-s-l-application">Acc&egrave;s &agrave; l'application</h2><p id="-qdzzqw_11">Dans la configuration d'environnement la ligne <code class="code" id="-qdzzqw_17">-&gt;setConfig(name: MaintenanceConfig::SECRET_LINK-&gt;value,value: &quot;/maintenance/dev/access/&quot;)</code> permet de d&eacute;finir un lien secret d'acc&egrave;s pouvant &ecirc;tre chang&eacute;.</p><p id="-qdzzqw_12">Ce lien donne m&egrave;ne &agrave; l'appel d'un controller permettant la gestion de l'acc&egrave;s &agrave; la maintenance</p><section class="procedure-steps"><h3 id="-qdzzqw_13" data-toc="-qdzzqw_13">Définition d'un controller de gestion de maintenance</h3><ol class="list _decimal"><li class="list__item" id="-qdzzqw_18"><p>Cr&eacute;er une class</p></li><li class="list__item" id="-qdzzqw_19"><p>Extends la class <code class="code" id="-qdzzqw_22">SaboCore\Controller\MaintenanceController</code></p></li><li class="list__item" id="-qdzzqw_20"><p>Impl&eacute;menter les m&eacute;thodes requises : <code class="code" id="-qdzzqw_23">showMaintenancePage</code> affiche la page de saisie des identifiants - <code class="code" id="-qdzzqw_24">verifyLogin</code> v&eacute;rifie si l'acc&egrave;s est autoris&eacute; (notamment par le traitement du formulaire re&ccedil;u)</p></li><li class="list__item" id="-qdzzqw_21"><p>Enregistrer le gestionnaire dans l'environnement via la ligne <code class="code" id="-qdzzqw_25">-&gt;setConfig(name: MaintenanceConfig::ACCESS_MANAGER-&gt;value,value: MyCustomManager::class)</code></p></li></ol></section><p id="-qdzzqw_14">Le framework arrive avec un processus d'acc&egrave;s par d&eacute;faut pr&eacute;-d&eacute;fini via les &eacute;l&eacute;ments suivant :</p><ul class="list _bullet" id="-qdzzqw_15"><li class="list__item" id="-qdzzqw_26"><p id="-qdzzqw_29"><code class="code" id="-qdzzqw_30">src/controllers/DefaultMaintenanceController</code> ce controller par d&eacute;faut impl&eacute;mente l'affichage d'une page et la v&eacute;rification via code secret d'acc&egrave;s</p></li><li class="list__item" id="-qdzzqw_27"><p id="-qdzzqw_31"><code class="code" id="-qdzzqw_32">src/views/maintenance/authentication.blade.php</code> vue de saisie de code d'acc&egrave;s</p></li><li class="list__item" id="-qdzzqw_28"><p id="-qdzzqw_33"><code class="code" id="-qdzzqw_36">src/storage/maintenance/maintenance.secret</code> fichier contenant un mot de passe hach&eacute;. Par d&eacute;faut <code class="code" id="-qdzzqw_37">motdepasse</code></p><div class="code-block" data-lang="php">echo password_hash(password: &quot;votre_mot_de_passe&quot;,algo: PASSWORD_BCRYPT);</div><aside class="prompt" data-type="warning" data-title="" id="-qdzzqw_35"><p>Il est important de modifier ce mot de passe avant d&eacute;ploiement</p></aside></li></ul><section class="procedure-steps"><h3 id="-qdzzqw_16" data-toc="-qdzzqw_16">Processus d'accès</h3><ol class="list _decimal"><li class="list__item" id="-qdzzqw_38"><p>Se rendre sur le lien secret</p></li><li class="list__item" id="-qdzzqw_39"><p>Le controller par d&eacute;faut affiche la vue d'authentification</p></li><li class="list__item" id="-qdzzqw_40"><p>&Agrave; la validation du formulaire la v&eacute;rification via <code class="code" id="-qdzzqw_42">verifyLogin</code> va comparer le mot de passe fourni &agrave; celui contenu dans le fichier <code class="code" id="-qdzzqw_43">maintenance.secret</code></p></li><li class="list__item" id="-qdzzqw_41"><p>Si conforme return true, et d&eacute;bloque l'acc&egrave;s via session sinon false</p></li></ol></section></section><div class="last-modified">Last modified: 11 août 2024</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="default-pages.html" class="navigation-links__prev">Pages par d&eacute;faut</a><a href="controllers.html" class="navigation-links__next">Controllers</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.10.0-b408/app.js"></script></body></html>